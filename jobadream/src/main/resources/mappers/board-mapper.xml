<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
	
	<!-- Pagination resuptMap -->
	<resultMap type="Pagination" id="pg_rm">
		<result property="listCount" column="CNT"/>
		<result property="categoryTitle" column="CATEGORY_TITLE"/>
	</resultMap>
	
	<!-- 게시글 목록 조회 resultMap -->
	<resultMap type ="Board" id="board_rm">
		<id property="boardNo" column="BOARD_NO"/>
		<result property="boardTitle" column="BOARD_TITLE"/>
		<result property="readCount" column="READ_COUNT"/>
		<result property="createDate" column="CREATE_DT"/>
		<result property="categoryCode" column="CATEGORY_CD"/>
		<result property="categoryTitle" column="CATEGORY_TITLE"/>
		<result property="boardTime" column="BOARD_TIME"/>
		<result property="boardPlace" column="BOARD_PLACE"/>
		<result property="boardPay" column="BOARD_PAY"/>
		<result property="boardContent" column="BOARD_CONTENT"/>
		<result property="memberNo" column="MEMBER_NO"/>
		<result property="memberName" column="MEMBER_NM"/>
		<result property="memberScore" column="MEMBER_SCORE"/>
		<result property="memberIntroduce" column="MEMBER_INTRODUCE"/>
	</resultMap>
	
	
	<select id="getListCount" parameterType="_int" resultMap="pg_rm">
		    SELECT CNT, (SELECT CATEGORY_TITLE FROM CATEGORY WHERE CATEGORY_CD =  #{categoryCode}) CATEGORY_TITLE
            FROM (SELECT COUNT(*) CNT
            FROM BOARD
            WHERE CATEGORY_CD=#{categoryCode}
            AND BOARD_STATUS='Y')
	</select>
	
	<select id="selectBoardList" parameterType="_int" resultMap="board_rm">
		SELECT * FROM BOARD_LIST
		WHERE BOARD_STATUS = 'Y'
		AND CATEGORY_CD = #{categoryCode}
		ORDER BY BOARD_NO DESC
	</select>
	
	<select id="getAllListCount" resultType="_int">
		SELECT COUNT(*) CNT
         FROM BOARD
         WHERE BOARD_STATUS='Y'
	</select>
	
	<select id="selectAllBoardList" parameterType="Pagination" resultMap="board_rm">
		SELECT * FROM BOARD_LIST
		WHERE BOARD_STATUS = 'Y'
		ORDER BY BOARD_NO DESC
	</select>
	
	<select id="selectBoard" parameterType="_int" resultMap="board_rm">
		SELECT * FROM BOARD_LIST
		WHERE BOARD_NO = #{boardNo}
	</select>
</mapper>
